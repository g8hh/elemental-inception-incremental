var lore = {
	"loreMessages" : {
		"start0" : {
			"text" :
				"经过几天的元素修补后，我发现了魔像。\n"+
				"同时触摸所有这些物体会产生某种闪光。\n"+
				"我看见一个老人向我跑来，他的叫喊使我失去了知觉。\n"+
				"后来我在阁楼中间醒来，但其他的东西都不见了。\n\n"+
				"几个小时后，我恢复了体力，可以再次活动了。\n"+
				"走出房子给我带来了另一个惊喜。\n"+
				"看来我在那里很久了。 看着最新鲜的报纸上的日期...\n"+
				"7 个月前，我出去寻找机器零件。 7个月。\n\n"+
				"随着这个启示慢慢开始深入，我想起了我父亲的状态。\n"+
				"学者只给了他几个星期……我去了诊所。\n"+
				"\n----------------------------------------------------------------------------------\n\n"+
				"几个月来的悲伤，慢慢的变成了对那位目光中的老者的恨意。\n"+
				"如果不是他，我至少会在父亲最后一口气时陪在他身边。\n"+
				"我知道我想做什么。 我想回到那里。\n\n"+
				"我右臂上的融合元素手套不是老人想要的东西。\n"+
				"现在我能够同时在其中容纳两个不同的元素。\n"+
				"但每当我尝试做某事时，我的胸口就会出现白光\n"+
				"并在几秒钟后引起无效元素波。 这就像一个诅咒。\n\n"+
				"我仍然应该能够做我以前能做的所有事情，我只需要\n"+
				"改进我的设备。 于是我的准备工作开始了。\n"+
				"\n----------------------------------------------------------------------------------\n\n"+
				"几个月过去了。\n\n"+
				"我收集了更多的机器零件并重新制作了我上次使用的机器。\n"+
				"在那段时间里，我有两个重大发现。 第一 - 用我的手套制作的压缩晶体\n"+
				"有点不同。 它们似乎无限压缩元素。 应用它们\n"+
				"到机器和 宝珠 非常容易。 我将 4 个宝珠改造成房间大小的坦克\n"+
				"并为 魔像 实验收集了更多。 我想我已经准备好推动它了。\n\n"+
				"使用新晶体，我能够逆向工程它们如何连接到另一侧。\n"+
				"我应该能够制造一个小裂缝并直接从中拉出元素。\n"+
				"\n----------------------------------------------------------------------------------"
		},
		"rifts0" : {
			"text" :
				"我不认为我能够单独使用 裂痕 达到足够高的元素数量。\n"+
				"问题是……我不知道我奶奶阁楼上的催化剂是怎么做的。\n"+
				"好吧，我将重新塑造它的形状，然后我们将看看它是如何从那里开始的。\n\n"+
				"那很有意思。 我真的不明白为什么它会提高反应效率，但是\n"+
				"用空气包围它似乎也能提高反应速度。\n"+
				"我认为将火集中在催化剂周围可以减少自然障碍并拉动更多\n"+
				"与裂隙同源的元素。\n\n"+
				"无论如何，准备好催化剂后，我只需要将其安装在房间中间。\n"+
				"\n----------------------------------------------------------------------------------"
		},
		"catalyst0" : {
			"text" :
				"由我的诅咒引起的元素波集中在催化剂上，很快就将其粉碎。\n"+
				"我猜围绕它的波浪的应变太强了。\n"+
				"至少从头开始创建 催化剂 给了我一些额外的知识\n"+
				"关于元素。 我将修改 催化剂 以用于转换机器的外部。\n"+
				"给它一个环形将在更大的表面上传播波浪力。 应该够了。\n"+
				"\n----------------------------------------------------------------------------------"
		},
		"catalyst1" : {
			"text" :
				"是的，它有效！ 可悲的是，新的催化剂结构似乎要弱得多。\n"+
				"但从长远来看，我仍然应该能够获得大量的元素。\n\n"+
				"现在是时候专注于我的目标了，找回一些魔像。\n"+
				"我不想再随意造成他们的创作，所以我设计了特殊的机器。\n"+
				"输液室可以让我用阀门控制流程。 用几十\n"+
				"空宝珠我甚至可以尝试制作多个相同类型的魔像。\n"+
				"我迫不及待地想探索新的可能性。\n"+
				"\n----------------------------------------------------------------------------------"
		},
		"stash0" : {
			"text" :
				"每次创建魔像时都会丢失所有元素，这会大大减慢我的进度。\n"+
				"但是看到元素波“感谢”我的诅咒，我能够更好地理解它。\n"+
				"波使用自然出现的少量元素在空间中传播\n"+
				"在我周围的世界。 我的诅咒波比魔像弱一点，\n"+
				"所以他们只能进入我在升级过程中使用的坦克。 这意味着一个简单的\n"+
				"隔离屏障应该能够阻止波浪进入我的容器。\n\n"+
				"可悲的是，在我的罐内使用该屏障会使它们无法使用\n"+
				"我现在的子空间管道技术，我应该还能做出一个特殊的容器\n"+
				"那将是安全的海浪。 将元素泵入和抽出它会出现问题。\n"+
				"嗯，我有一个计划。 我将只能检索一小部分存储的元素\n"+
				"在升级或魔像创建过程中创建的每一波之后，但它更好\n"+
				"比从头开始\n"+
				"\n----------------------------------------------------------------------------------"
		},
		"merge0" : {
			"text" :
				"魔像产生的元素波将另一波拉向它，黑暗包围了他们。\n"+
				"I think the process started due to vast amounts of Elements present in the room.\n\n"+
				"After a while of intense spinning the two Golems merged into one.\n"+
				"That's... insane. There are only 4 Elements. What's inside new one? I cannot interact\n"+
				"with it using my gloved arm. For now I just have to make sure this accident doesn't\n"+
				"happen again. From now on I'll put all golems on stable pedestals.\n\n\n"+
				"Experimenting with new golems is the most interesting thing I've ever done.\n"+
				"While I used normal Golems to help with gathering their respective Elements I cannot\n"+
				"do the same with this one. But it emanates a faint aura that spread across the room and\n"+
				"it seems that it enhanced my machines in some weird way. I'll try to document details of\n"+
				"that power later. Now the question is... if that combination of base Golems created this,\n"+
				"then what happens when I try another combination?\n\n"+
				"Thanks to all my experiences with creating Golems I was able to construct tiny versions\n"+
				"of Orbs. I only need a bit of Element to turn them into Golems, but they dissipate after\n"+
				"a few minutes. Thanks to their size I was able to contain their waves inside for isolated study.\n"+
				"With them I've done more tests and indeed all combinations of base Golems create different\n"+
				"'advanced' Golems. I've also tested their powers and they are so much different then\n"+
				"anything I've seen before. My next goal should be making as many of them as possible.\n"+
				"\n----------------------------------------------------------------------------------"
		},
		"eat0" : {
			"text" :
				"It seems that two Golems of the same type can't coexists together inside a small space.\n"+
				"Elemental waves caused them to connect, and soon after one drained the other,\n"+
				"only to leave the newly created Golem in an unstable state that caused small explosion of \n"+
				"white light. Did that damned old man interfere again?\n"+
				"\n----------------------------------------------------------------------------------"
		},
		"infernal0" : {
			"text" :
				"The Golem, which I have decided to name 'Infernal' feels special.\n"+
				"Not only it seems that it is the most powerful of combined Golems, it also has this strange\n"+
				"trend. My calculations noted that its power to generate all Elements will go down to\n"+
				"nothing at some point. I suspect that after point it'll actually start to drain\n"+
				"Elements from my system. I don't really know what it's going to do after that, but\n"+
				"it's clear I'll need to get there."
		},
		"infernal1" : {
			"text" :
				"My suspicion was right. As soon as I crossed 1e90 threshold the Infernal Golem reversed\n"+
				"its power and started draining Elements, the more I have the stronger the drain.\n"+
				"Its also growing in size according to its drain rate.\n\n"+
				"I think giving it enough of all Elements should satisfy it at some point.\n"+
				"I just hope my reactions are strong enough to sustain it.\n"+
				"\n----------------------------------------------------------------------------------"
		},
		"ending0" : {
			"text" :
				"Once the Infernal reached it maximal size it rose into the air from pedestal and\n"+
				"started repeatedly sending huge Elemental Waves.\n\n"+
				"The first wave cleared all my machines from Elements, even my Stash.\n"+
				"The Second wave destabilized all other Golems\n\n"+
				"Immense pain flooded my Gloved right arm. I froze in place unable to fight it.\n\n"+
				"A Third wave sent all my machines into the wall, making an improvised spiked barrier around the room.\n"+
				"A Fourth wave made other Golems explode into secondary Elemental Waves.\n\n"+
				"Two things happened almost at the same time:\n"+
				"----------------------------------------------------------------------------------\n"+
				"Bright white light appeared on one of the walls.\n"+
				"Secondary waves from Golems reached Infernal and began changing him.\n"+
				"----------------------------------------------------------------------------------\n"+
				"The silhouette of the old man stepped through the light wall.\n"+
				"The eyes of the Infernal Golem gained focus and he looked around the room.\n"+
				"----------------------------------------------------------------------------------\n"+
				"Old man noticed me and turned towards me. \"You...\"\n"+
				"The Infernal Golem stopped emitting waves and shrank a little.\n"+
				"----------------------------------------------------------------------------------\n"+
				"A single finger was pointed towards me. \"I can't let you do this.\"\n"+
				"The Infernal suddenly launched towards me.\n"+
				"----------------------------------------------------------------------------------\n"+
				"\"I'm sorry.\" - an instant beam of light pointing at my chest, at first weak, but warm.\n"+
				"My golem hit me from my left side and pushed me into the spiked wall to my right.\n"+
				"----------------------------------------------------------------------------------\n"+
				"I think the Golem took the hit from the light. I blinked.\n"+
				"The Infernal vanished. The Light was also gone. The Old man looked exactly like the Alchemist in books.\n"+
				"I hit the wall and felt spikes piercing my body. A new pain.\n"+
				"Old man said:\"I guess those spikes did it in my stead\"\n"+
				"I saw the old man turning around and walking into the wall.\n"+
				"\"At least I don't feel pain in my gloved arm anymore..\" was my last thought before\n"+
				"losing consciousness.\n"+
				"\n----------------------------------------------------------------------------------\n\n"+
				"Few hours later:\n"+
				"I woke up on the floor. I got up. No pain, no issues with moving.\n"+
				"I didn't feel this good in weeks of sleepless nights I've spent on preparations.\n"+
				"Confused I looked around. Spikes on walls. So it did happen. The spikes nearest me\n"+
				"are still covered in blood, yet I don't have any wounds. My body looked just as\n"+
				"always until I noticed the glass globe in my left arm, marking a spot I was\n"+
				"hit by the Infernal. That's... at this point I wasn't even surprised.\n"+
				"I started thinking what could that mean and how could I use it...\n\n"+
				"While thinking, I noticed another small glass globe on the floor near me.\n"+
				"I guess those are remains of the Infernal Golem. I reached out to pick it up, but\n"+
				"it got absorbed into my hand and small purple orb appeared inside my own globe.\n\n\n"+
				"\n----------------------------------------------------------------------------------"+
				"\n----------------------------------------------------------------------------------"+
				"\n----------------------------------------------------------------------------------"+
				"\n----------------------------------------------------------------------------------\n\n"+
				"This marks the end of stage two. Thank you for playing!\n"+
				"You can now check out a sneak peek of the main mechanic of stage three.\n"+
				"Click the circle in the middle of the main setup.\n\n\n\n"+
				"If you liked the game please consider supporting me.\n"+
				"I'd love to work full time on this game.\n"+
				"\n----------------------------------------------------------------------------------\n\n\n"+
				"Credits\n\n\n"+
				"Production director\n"+
				"Nagshell\n\n"+
				"Art Design\n"+
				"Nagshell\n\n"+
				"Programming\n"+
				"Nagshell\n\n"+
				"Public Relations\n"+
				"Nagshell\n\n"+
				"Moral Support\n"+
				"Silent but Deadly, Essi\n"+
				"Loud sub-woof-er, Baster\n\n"+
				"Supporters on Patreon\n"+
				"\n"+
				"PhantomLemon\n"+
				"ranger10700\n"+
				"Slav\n"
				},
		
	},//"\n"+
	"popupMessages" : {
		"catalyst0" : {
			"text" : 
				"Elemental waves caused by my curse focused on Catalyst.\n"+
				"And soon after shattered it into pieces.",
			//"changeTab" : 0
		},
		"merge0" : {
			"text" :
				"Another Orb imploded into a Golem and waves reached another Golem.\n\n"+
				"Darkness filled the Orb infuser.\n\n"+
				"I rushed to the center of the room to see what's happening."
		},
		"eat0" : {
			"text" :
				"Elemental waves created by a new Golem reached another Golem of same type.\n"+
				"Something is not right..."
		},
		
	},
	"bannerMessages" : {
		"overflow0" : {
			"text" : "Open all conversion machine valves to create loop."
		},
		"upgradeCost0" : {
			"text" : "Curse clears Elements used in upgrades, including respective tanks and machines."
		},
		"machineSpeed0" : {
			"text" : "Rotation speed multiplies speed of conversion. Very effective with highly upgraded Catalyst."
		},
		"pun0" : {
			"text" : "You slowly start seeing scrolling text. Spooky."
		},
		"pun1" : {
			"text" : "Suddenly, nothing of particular interest happened."
		},
		"pun2" : {
			"text" : "Hm, you wanna hear a joke about paper? It's tearable."
		},
		"pun3" : {
			"text" : "If you're enjoying the game consider supporting me \\('_' )."
		},
		"pun4" : {
			"text" : "Suddenly, nothing of particular interest happened."
		},
		"pun5" : {
			"text" : "No, mayonnaise won't ever become one of Elements. Do NOT write songs about it."
		},
		"pun6" : {
			"text" : 
				"Did you notice puns are getting incrementally more funny each time you hear them?"+
				"                                                                                           "+
				"Did you notice puns are getting incrementally more funny each time you hear them?"+
				"                                                                                           "+
				"Did you notice puns are getting incrementally more funny each time you hear them?"
		},
		"pun7" : {
			"text" : "PundexOutOfBounds - commence charging my PunReInator."
		},
		"pun8" : {
			"text" : "No."
		},
		"pun9" : {
			"text" : "You cannot catch Golems by throwing Orbs at them. I've tried.."
		},
		"pun10" : {
			"text" : "The First Alkahistorian has a discord!"
		}
	},
	
	"addLore" : function(loreId) {
		var messageLines = lore.loreMessages[loreId].text.split('\n');
		dynamicData.lore.messages.push("");
		for(var i=0;i<messageLines.length;i++) {
			dynamicData.lore.messages.push(messageLines[i]);
		}
		dynamicData.lore.maxScroll += 20*(1+messageLines.length);
		dynamicData.tabStatus[2].highlight = true;
	},
	"activatePopup" : function(popupId) {
		dynamicData.popupActive = popupId;
		if(lore.popupMessages[popupId].changeTab) {
			tempData.activeTab = lore.popupMessages[popupId].changeTab;
		}
	},
	"disablePopup" : function() {
		dynamicData.popupActive = null;
	},
	"addBannerMessage" : function(bannerId) {
		if(tempData.currentBanner) {
			tempData.nextBanners.push(bannerId);
		} else {
			tempData.currentBanner = lore.bannerMessages[bannerId];
		}
	},
	"bannerScroll" : function(ctx) {
		tempData.currentBannerPosition -= tempData.bannerSpeed;
		if(!tempData.currentBanner.bannerLength) {
			tempData.currentBanner.bannerLength = estimateBannerLength(tempData.currentBanner.text,ctx);
		}
		
		if(tempData.currentBanner.bannerLength + tempData.currentBannerPosition < 120) {
			tempData.currentBannerPosition = 780;
			if(tempData.nextBanners.length > 0) {
				tempData.currentBanner = lore.bannerMessages[tempData.nextBanners.shift()];
			} else {
				tempData.currentBanner = null;
			}
		}
	},
	"idleBanner" : function() {
		if(lore.bannerMessages["pun"+dynamicData.punCounter]) {
			lore.addBannerMessage("pun"+dynamicData.punCounter++);
		} else {
			dynamicData.punCounter = 0;
			lore.addBannerMessage("pun"+dynamicData.punCounter++);
		}
	}
}
